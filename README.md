# SasRMC
SasRMC is a Python library for numerical modelling of small-angle scattering data. 

## Setup
SasRMC is compatible with Python 3.8 and newer. An upgrade to Python 3.10 is planned.

1. Download source files from https://github.com/lestercbarnsley/SasRMC -> `Code` -> `Download ZIP`
2. If you have an existing virtual environment or conda environment you wish to use, activate it in the usual way and jump to step 9.
3. If you wish to create a new Python virtual environment, follow steps 4 and 5. If you wish to create a new conda environment follow steps 6-8.
4. Navigate to where you wish to create a **venv** virtual environment and create it with
    `$ python -m venv .myvenv`
where `myvenv` is the name of your **venv**
5. Activate the virtual environment with 
    `$ .\.myvenv\Scripts\activate`
6. I recommend **conda** for scientists using Windows who are new to Python. Please consult with your local Pythonista for their advice. Installation instructions for conda can be found online: https://docs.conda.io/projects/conda/en/latest/user-guide/install/download.html
7. After installing conda, in a terminal, create an environment with
    `$ conda create -n myenv python=3.x`
where `myenv` is the name of your conda environment and `3.x` is the Python version you wish to use. (Please use 3.8 or greater).
8. Activate the conda environment with
    `$ conda activate myenv`
9. In the terminal, navigate to the directory containing `setup.py`
10. Install all dependencies with
    `(myenv)$ pip install -e .`

## Usage
Most configuration for SasRMC is done using Excel spreadsheets. You can use SasRMC without needing to edit any Python code.

1. In your text editor of choice, open `data/config.yaml`
2. Next to `input_config_source` specify an Excel spreadsheet that will contain configuration data for your simulation. Your excel file should be in the same folder as the `config.yaml` file.
3. Next to `output_folder` specify the folder that you want the output and log files to be saved to.
4. The `data` folder contains templates for how a typical simulation should be configured.
5. A new template Excel spreadsheet can be generated by specifying one of the following commands next to `input_config_source`:
    `generate core shell template`
    `generate dumbbell template`
    `generate numerical dumbbell template`
    `generate reload template`
More templates will be available in future versions.
6. Edit and save all config files. Please notice that Excel spreadsheets have multiple tabs for additional options.
7. In the terminal, run
    `(myenv)$ python main.py`
8. When the simulation is complete, you can find all outputs in the specified `output_folder`

The `/data` folder contains a file `CoreShell_F20_pol.xlsx` which contains data described in the associated publication, and shows an example for how a simulation for a SANSPol measurement across 3 detector configurations and 2 polarization states can be set out.

## Advanced Usage

1. Open a new .py file
2. Type: `import sas_rmc`
3. At this point, you are only limited by your own imagination (and my ability to write documentation).
4. More documentation coming soon...
